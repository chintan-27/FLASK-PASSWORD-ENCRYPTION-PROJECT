<!DOCTYPE html>
<html>
   <head>
      <title>Sign Up</title>
      <link rel="stylesheet" href="{{ url_for('static',filename='styles/style.css') }}">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
   </head>
   <body>
   <div class="container">
      <h3>Students - Flask SQLAlchemy example</h3>
      <hr/>
      
      {%- if message %}
         <div class = "alert alert-danger">
            {{ message }}
         </div>
      {%- endif %}
      
      <form onsubmit= "submit(this)" action = "{{ request.path }}" method = "post">
         <label for = "name">Name</label><br>
         <input type = "text" name = "name" placeholder = "Name"  required/><br>

         <label for = "username">Username</label><br>
         <input type = "text" name = "username" placeholder = "Username"  required/><br>

         <label for = "mobile">Mobile</label><br>
         <input type="text" name = "mobile" placeholder = "Mobile" pattern="/^\d{10}$/" required/><br>    

         <label for = "email">Email</label><br>
         <input type = "email" name = "email" placeholder = "email"  required/><br>

         <label for = "passowrd">Password</label><br>
         <input type = "password" id="psw" name="password" placeholder="Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required/><br>
         <br><br>
         <input type = "submit" value = "Submit" />
      </form>
      <div id="message">
         <h3>Password must contain the following:</h3>
         <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
         <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
         <p id="number" class="invalid">A <b>number</b></p>
         <p id="length" class="invalid">Minimum <b>8 characters</b></p>
       </div>
   </div>
      <script>
         var myInput = document.getElementById("psw");
         var letter = document.getElementById("letter");
         var capital = document.getElementById("capital");
         var number = document.getElementById("number");
         var length = document.getElementById("length");
         var count = 4
         myInput.onfocus = function() {
           document.getElementById("message").style.display = "block";
         }
         
         myInput.onblur = function() {
           document.getElementById("message").style.display = "none";
         }
         
         myInput.onkeyup = function() {
           var lowerCaseLetters = /[a-z]/g;
           if(myInput.value.match(lowerCaseLetters)) {
             letter.classList.remove("invalid");
             letter.classList.add("valid");
             count--;
           } else {
             letter.classList.remove("valid");
             letter.classList.add("invalid");
         }
         
           var upperCaseLetters = /[A-Z]/g;
           if(myInput.value.match(upperCaseLetters)) {
             capital.classList.remove("invalid");
             capital.classList.add("valid");
             count--;
           } else {
             capital.classList.remove("valid");
             capital.classList.add("invalid");
           }
         
           var numbers = /[0-9]/g;
           if(myInput.value.match(numbers)) {
             number.classList.remove("invalid");
             number.classList.add("valid");
             count--;
           } else {
             number.classList.remove("valid");
             number.classList.add("invalid");
           }
         
           if(myInput.value.length >= 8) {
             length.classList.remove("invalid");
             length.classList.add("valid");
             count--;
           } else {
             length.classList.remove("valid");
             length.classList.add("invalid");
           }
         }

         
         </script>
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
   </body>
</html>